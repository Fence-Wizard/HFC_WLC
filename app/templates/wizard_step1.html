{% extends "base.html" %}
{% block content %}
<h2>Step 1 – Wind</h2>

<form method="post" action="/step2">
  <label>ZIP code (installation location):</label>
  <input
    type="text"
    name="zip_code"
    pattern="\d{5}"
    value="{{ data.zip_code or '' }}"
    required
  />

  <label>Risk category:</label>
  <select name="risk_category">
    <option value="I" {% if data.risk_category=="I" %}selected{% endif %}>
      Risk Category I
    </option>
    <option value="III" {% if data.risk_category=="III" or not data.risk_category %}selected{% endif %}>
      Risk Category III
    </option>
  </select>

  <div class="help-card">
    <strong>What is a risk category?</strong>
    <ul>
      <li><b>Risk Category I</b> – Low-risk, temporary, or minor structures.
        This is usually appropriate for <b>temporary fence</b>, laydown yards,
        and non-essential work.</li>
      <li><b>Risk Category III</b> – Structures that pose higher risk to the
        public, or that are important to post-disaster response (e.g. some
        public safety / infrastructure projects). Use this only when the
        drawings or engineer explicitly say Risk Cat III.</li>
    </ul>
    <p class="small">
      When in doubt, <b>follow the project drawings</b> or confirm with the
      project manager/engineer.
    </p>
  </div>

  <p>
    Use the ASCE wind maps below (or the project drawings) to determine the
    basic wind speed <b>V</b> (3-sec gust, mph) for the job location and
    risk category. Then enter that value here:
  </p>

  <label>Design wind speed V (mph):</label>
  <input
    type="number"
    name="wind_speed_mph"
    step="1"
    min="60"
    max="250"
    value="{{ data.wind_speed_mph or '' }}"
    required
  />

  <h3>ASCE 7 Wind Maps (for reference)</h3>

  <div class="help-card">
    <strong>How to use these maps</strong>
    <ol>
      <li>Find the <b>approximate location</b> of the project on the map.</li>
      <li>Make sure you are looking at the map for the
          <b>same risk category</b> you selected above.</li>
      <li>Read the wind speed value (e.g. 115, 120, 140) from the contour lines
          at that location. Values are 3-sec gust speeds in mph at 33 ft
          for Exposure C.</li>
      <li>Type that value into <b>Design wind speed V (mph)</b> above.</li>
    </ol>
    <p class="small">
      For special wind regions (shaded areas) or confusing locations, use the
      value given on the drawings or ask the engineer.
    </p>
  </div>

  <p><b>Risk Category I (Figures 26.5-1A &amp; 26.5-1B)</b></p>
  <div class="map-row">
    <div class="map-card">
      <a href="/static/images/asce_26_5_1A_risk_I.png" target="_blank">
        <img
          src="/static/images/asce_26_5_1A_risk_I.png"
          class="map-thumb"
          alt="ASCE Figure 26.5-1A – Risk Category I (West/Alaska/Hawaii)"
        />
      </a>
      <p class="map-caption">
        <b>Figure 26.5-1A.</b> Western U.S., Alaska, Hawaii – Risk Category I.
        Use for Cat I jobs in these regions.
      </p>
    </div>

    <div class="map-card">
      <a href="/static/images/asce_26_5_1B_risk_I_continued.png" target="_blank">
        <img
          src="/static/images/asce_26_5_1B_risk_I_continued.png"
          class="map-thumb"
          alt="ASCE Figure 26.5-1B – Risk Category I (Central/Eastern U.S.)"
        />
      </a>
      <p class="map-caption">
        <b>Figure 26.5-1B.</b> Central &amp; Eastern U.S. – Risk Category I.
        This is the map most of our jobs (VA/MD/DC/NC) will use when Cat I.
      </p>
    </div>
  </div>

  <p><b>Risk Category III (Figures 26.5-1C, etc.)</b></p>
  <div class="map-row">
    <div class="map-card">
      <a href="/static/images/asce_26_5_1C_risk_III.png" target="_blank">
        <img
          src="/static/images/asce_26_5_1C_risk_III.png"
          class="map-thumb"
          alt="ASCE Figure 26.5-1C – Risk Category III (Central/Eastern U.S.)"
        />
      </a>
      <p class="map-caption">
        <b>Figure 26.5-1C.</b> Central &amp; Eastern U.S. – Risk Category III.
        Use only when drawings specify Risk Cat III.
      </p>
    </div>

    <div class="map-card">
      <a
        href="/static/images/asce_26_5_1C_risk_III_continued.png"
        target="_blank"
      >
        <img
          src="/static/images/asce_26_5_1C_risk_III_continued.png"
          class="map-thumb"
          alt="ASCE Figure 26.5-1C – Risk Category III (other regions)"
        />
      </a>
      <p class="map-caption">
        Additional regions for Risk Category III (e.g. West, Alaska, etc.).
      </p>
    </div>
  </div>

  <p class="small">
    Click any map to open a full-size version in a new tab. Use linear
    interpolation between contours if the site falls between lines, and follow
    any special wind region notes or project-specific instructions from the
    engineer.
  </p>

  <label>Exposure category:</label>
  <select name="exposure">
    {% for exp in ["B","C","D"] %}
    <option
      value="{{ exp }}"
      {% if data.exposure==exp or (not data.exposure and exp=="C") %}selected{% endif %}
    >
      {{ exp }}
    </option>
    {% endfor %}
  </select>

  <small>
    <b>Exposure B</b>: Urban / suburban, many buildings/trees.<br />
    <b>Exposure C</b>: Open terrain with scattered obstructions
    (fields, parking lots, many industrial/commercial sites).<br />
    <b>Exposure D</b>: Flat, unobstructed areas and shorelines
    exposed to open water for 1 mile or more.
  </small>

  <button type="submit">Next</button>
</form>
{% endblock %}
